<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="./TalentFlowIcon.png" />
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

  <script type="module" crossorigin src="/assets/index-CdnQJaBy.js"></script>
  <link rel="stylesheet" crossorigin href="/assets/index-BsjDXatA.css">
</head>

<body>
  <!-- <audio id="chat-open-sound" src="mixkit-long-pop-2358.wav"></audio> -->
  <audio id="bot-reply-sound" src=""></audio>
  <div id="root"></div>
  <!-- YariHive Chatbot Widget -->
  <style>
    /* CHAT BUTTON */
    #yari-chatbot-btn {
      position: fixed;
      bottom: 25px;
      right: 25px;
      /* background: linear-gradient(135deg, #4DBEFF, #4DBEFF); */
      color: #fff;
      border-radius: 50%;
      width: 65px;
      height: 65px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      font-size: 30px;
      z-index: 9999;
      /* box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25); */
      transition: all 0.3s ease;
    }

    #yari-chatbot-btn:hover {
      transform: scale(1.15) rotate(8deg);
    }

    /* CHAT WINDOW */
    #yari-chat-window {
      position: fixed;
      bottom: 100px;
      right: 25px;
      width: 360px;
      height: 420px;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      /* box-shadow: 0px 15px 40px rgba(0,0,0,0.25); */
      border: 1px solid rgba(255, 255, 255, 0.4);
      display: none;
      flex-direction: column;
      z-index: 9999;
      overflow: hidden;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* HEADER */
    #yari-chat-header {
      /* background: linear-gradient(135deg, #5cc18c, #3fa56f); */
      background-color: #E0912F;
      color: white;
      padding: 9px;
      font-size: 18px;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    #yari-chat-header::before {
      content: "ğŸ¤–";
      font-size: 24px;
    }

    /* CHAT BODY */
    #yari-chat-body {
      padding: 10px;
      overflow-y: auto;
      flex: 1;
    }

    /* CHAT BUBBLES */
    .chat-message {
      display: flex;
      margin-bottom: 10px;
      max-width: 90%;
      margin-left: 10px;
      animation: msgPop 0.25s ease;
    }

    @keyframes msgPop {
      0% {
        transform: scale(0.8);
        opacity: 0;
      }

      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    .chat-bubble {
      padding: 10px 14px;
      border-radius: 14px;
      line-height: 1.4;
      font-size: 15px;
    }

    /* USER MESSAGE */
    .chat-message.user {
      justify-content: flex-end;
    }

    .chat-bubble.user {
      background: #646B2E;
      color: #fff;
      border-bottom-right-radius: 4px;
      /* box-shadow: 0 0px 12px rgba(0, 0, 0, 0.15); */
    }

    /* BOT MESSAGE */
    .chat-message.bot {
      justify-content: flex-start;
    }

    .chat-bubble.bot {
      background: #f1f1f1;
      width: 100%;
      color: #333;
      border-bottom-left-radius: 4px;
      /* box-shadow: 0 4px 1px rgba(0, 0, 0, 0.1); */
    }

    .chat-message.bot {
      /* background: rgb(13, 242, 169); */
      max-width: 190%;
    }


    /* INPUT AREA */
    #yari-chat-input {
      display: flex;
      border-top: 1px solid #ddd;
      padding: 10px;
      background: rgba(255, 255, 255, 0.9);
    }

    #yari-input {
      flex: 1;
      padding: 1px 1px;
      border-radius: 12px;
      border: 1px solid #ccc;
      outline: none;
      font-size: 14px;
      transition: 0.2s;
    }

    #yari-input:focus {
      border-color: #E0912F;
      /* box-shadow: 0 0 1px rgba(92,193,140,0.3); */
    }

    /* SEND BUTTON */
    #yari-send-btn {
      /* background: linear-gradient(135deg, #5cc18c, #3fa56f); */
      background-color: #E0912F;
      color: white;
      padding: 10px 15px;
      margin-left: 10px;
      border-radius: 12px;
      cursor: pointer;
      transition: 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #yari-send-btn:hover {
      transform: scale(1.05);
    }

    /* QUICK REPLIES */
    .quick-reply {
      background: #E0912F;
      color: white;
      padding: 7px 12px;
      border-radius: 20px;
      display: inline-block;
      margin: 4px 4px 0 0;
      cursor: pointer;
      font-size: 12px;
      transition: 0.3s;
      /* box-shadow: 0px 4px 10px rgba(92,193,140,0.4); */
    }

    .quick-reply:hover {
      background: #E0912F;
      transform: scale(1.05);
    }

    #yari-typing-indicator {
      display: flex;
      gap: 6px;
      padding: 10px 15px;
      margin-left: 10px;
      margin-bottom: 10px;
    }

    .typing-dot {
      width: 8px;
      height: 8px;
      background: #E0912F;
      border-radius: 50%;
      animation: blink 1.4s infinite both;
    }

    .typing-dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    .virtual-style p {
      font-size: 13px;
      color: white;
      margin: 0;
      /* removes extra spacing */
      padding: 0;
    }

    @keyframes blink {
      0% {
        opacity: .2;
      }

      20% {
        opacity: 1;
      }

      100% {
        opacity: .2;
      }
    }

    .bot-message {
      background: #f1f1f1;
      padding: 10px;
      border-radius: 8px;
      margin: 8px 0;
      width: fit-content;
      max-width: 100%;
      font-family: Arial, sans-serif;
      font-size: 14px;
      line-height: 1.4;
      white-space: pre-wrap;
    }

    .typing {
      border-right: 2px solid #444;
      animation: blink 0.5s step-end infinite alternate;
    }

    @keyframes blink {
      50% {
        border-color: transparent;
      }
    }

    .time-slot-btn {
      padding: 6px 10px;
      border: 1px solid #646B2E;
      border-radius: 6px;
      background: #fff;
      cursor: pointer;
      font-size: 13px;
      color: #646B2E;
    }

    .time-slot-btn.active {
      background: #646B2E;
      color: #646B2E;
    }

    .time-slot-btn.booked {
      background: #646B2E;
      color: #999;
      border-color: #646B2E;
      cursor: not-allowed;
    }
  </style>
  <!-- Chatbot Button -->
  <!-- <div id="yari-chatbot-btn">ğŸ’¬
  <span id="yari-chatbot-badge"></span>
</div> -->
  <div id="yari-chatbot-btn" style="position:fixed; bottom:20px; right:20px;
  width:75px; height:75px; border-radius:50%; background:white;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer;">

    <img id="chat-icon" src="icons8-chat.gif" alt="chat emoji" style="width:45px; height:45px;" />

    <span id="yari-chatbot-badge"></span>
  </div>


  <!-- Chat Window -->
  <div id="yari-chat-window">
    <div id="yari-chat-header">
      <!-- <img src="../../assets/Block1/PeoplesBanner.png" id="yari-chat-logo" /> -->
      <span>YariHive
        <div class="virtual-style">
          <p>Virtual Assistant</p>
        </div>
      </span>
    </div>
    <div id="yari-chat-body"></div>
    <div id="yari-typing-indicator" style="display:none;">
      <div class="typing-dot"></div>
      <div class="typing-dot"></div>
      <div class="typing-dot"></div>
    </div>

    <div id="yari-chat-input">
      <input id="yari-input" placeholder="Type your message..." />
      <div id="yari-send-btn">Send</div>
    </div>
  </div>

  <script>
    const btn = document.getElementById("yari-chatbot-btn");
    const box = document.getElementById("yari-chat-window");
    const body = document.getElementById("yari-chat-body");
    const input = document.getElementById("yari-input");
    const badge = document.getElementById("yari-chatbot-badge");

    let chatOpen = false;

    let soundEnabled1 = true;

    // Unlock audio on first user interaction
    btn.addEventListener("click", () => {
      soundEnabled = false;
      console.log("ji")
    });

    // Toggle Chatbot
    btn.onclick = () => {
      chatOpen = !chatOpen;
      console.log(chatOpen)
      console.log(soundEnabled)
      box.style.display = chatOpen ? "flex" : "none";

      // if (chatOpen && soundEnabled) {
      //     setTimeout(() => {
      //         audio3.currentTime = 0;
      //         audio5.play().catch(() => {});
      //         console.log("hi12");
      //     }, 2000);
      // }

      // Hide badge when open
      if (chatOpen) badge.style.display = "none";

      const chatIcon = document.getElementById("chat-icon");

      if (chatOpen) {
        // Change to cross âŒ or custom image
        chatIcon.src = "icons8-close-window.gif"; // <-- use your close image
        // If you want emoji, use: chatIcon.src = "assets/cross-emoji.png";
      } else {
        // Restore animated emoji
        chatIcon.src = "icons8-chat.gif";
      }

      // First welcome message
      if (chatOpen && body.innerHTML.trim() === "") {
        showTyping();

        setTimeout(() => {
          hideTyping();
          botReplyTyping("ğŸ‘‹ Hi! Welcome to YariHive â€” All-in-one HR Solution.<br><br>How can I help you today?");
          showQuickReplies(["Request a Demo", "Pricing Details", "Explore Features", "Contact Support"]);
        }, 700);
      }
    };


    // Auto-open after load (NO SOUND to avoid autoplay block)
    window.addEventListener("load", () => {
      setTimeout(() => {

        if (!chatOpen) {
          // const audio1 = document.getElementById("chat-open-sound");

          // audio.currentTime = 0;
          // audio.play().catch(() => {});  // prevents errors if audio autoplay blocked


          badge.style.display = "none";
        }

      }, 2000);
    });


    function showTyping() {
      document.getElementById("yari-typing-indicator").style.display = "flex";
    }


    function hideTyping() {
      document.getElementById("yari-typing-indicator").style.display = "none";
    }

    async function botReply(text) {
      showTyping();

      // Simulate thinking time (optional)
      setTimeout(() => {
        hideTyping();
        botReply(text);
      }, 800); // 0.8 sec delay
    }

    // Send message
    document.getElementById("yari-send-btn").onclick = () => sendMessage();
    input.addEventListener("keypress", (e) => {
      if (e.key === "Enter") sendMessage();
    });

    function sendMessage(msg = null) {
      // Ensure msg is always a string
      const message = String(msg || input.value.trim());
      if (!message) return;

      showUserMessage(message);
      input.value = "";

      // Pass message to bot handler
      setTimeout(() => handleBotFlow(message), 400);
    }

    function showUserMessage(msg) {
      body.innerHTML += `
    <div class="chat-message user">
      <div class="chat-bubble user">${msg}</div>
    </div>
  `;
      body.scrollTop = body.scrollHeight;
    }


    // function botReply(msg) {
    //   body.innerHTML += `
    //     <div class="chat-message bot">
    //       <div class="chat-bubble bot">${msg}</div>
    //     </div>
    //   `;
    //   body.scrollTop = body.scrollHeight;
    // }
    function botReply(message) {
      const sound = document.getElementById("bot-reply-sound");

      // Play sound on every bot message
      sound.currentTime = 0;
      sound.play().catch(() => { });

      // Existing bot message code...
      const msgDiv = document.createElement("div");
      msgDiv.className = "chat-message bot";
      msgDiv.innerHTML = `<div class="chat-bubble bot">${message}</div>`;
      body.appendChild(msgDiv);

      body.scrollTop = body.scrollHeight;
    }


    // Show quick reply buttons
    function showQuickReplies(options) {
      // Remove any existing quick replies to avoid duplicates
      const oldContainer = document.getElementById("quick-replies-container");
      if (oldContainer) oldContainer.remove();

      const container = document.createElement("div");
      container.id = "quick-replies-container";
      container.style.marginTop = "8px";

      options.forEach(opt => {
        const btn = document.createElement("span");
        btn.className = "quick-reply";
        btn.style.cursor = "pointer";
        btn.style.background = "#E0912F";
        btn.style.color = "#fff";
        btn.style.padding = "5px 10px";
        btn.style.borderRadius = "8px";
        btn.style.marginRight = "5px";
        btn.style.fontSize = "13px";
        btn.innerText = opt;

        // Pass only the option string, not the event
        btn.onclick = (event) => {
          event.preventDefault(); // optional
          sendMessage(opt);
        }

        container.appendChild(btn);
      });

      body.appendChild(container);
      body.scrollTop = body.scrollHeight;
    }


    //slow-typing
    function botReplyTyping(htmlContent) {
      const chatBox = document.getElementById("yari-chat-body");

      const wrapper = document.createElement("div");
      wrapper.className = "bot-message";
      wrapper.style.whiteSpace = "normal";
      chatBox.appendChild(wrapper);

      // Split content by <br> to handle line breaks
      const lines = htmlContent.split("<br>");

      let lineIndex = 0;
      let charIndex = 0;

      function typeChar() {
        if (lineIndex < lines.length) {
          const line = lines[lineIndex];
          if (charIndex < line.length) {
            wrapper.innerHTML += line[charIndex];
            charIndex++;
            chatBox.scrollTop = chatBox.scrollHeight;
            setTimeout(typeChar, 12);
          } else {
            // End of line, insert <br> and go to next line
            wrapper.innerHTML += "<br>";
            lineIndex++;
            charIndex = 0;
            setTimeout(typeChar, 12);
          }
        }
      }

      typeChar();
    }

    const features = `âœ¨ ğ˜ğšğ«ğ¢ğ‡ğ¢ğ¯ğ ğ…ğğšğ­ğ®ğ«ğğ¬:<br>ğŸ‘¨â€ğŸ’¼ Employee Management<br>ğŸ“ Leave Management & Approvals<br>ğŸ“‘ Timesheet Tracking<br>ğŸ“Œ Task Assignment & Monitoring<br>ğŸ“‘ Compliance & Policies<br>ğŸ¢ Org Chart Visualization<br>ğŸ” Role-Based Access<br>ğŸŒ Employee Self-Service Portal`;


    function botReplyTypingTable(htmlContent) {
      const chatBox = document.getElementById("yari-chat-body");

      const wrapper = document.createElement("div");
      wrapper.className = "bot-message";
      wrapper.style.whiteSpace = "normal";
      chatBox.appendChild(wrapper);

      // Create a temporary div to parse the table HTML
      const tempDiv = document.createElement("div");
      tempDiv.innerHTML = htmlContent;

      const table = tempDiv.querySelector("table");
      if (!table) {
        wrapper.innerHTML = htmlContent; // fallback
        return;
      }

      const newTable = document.createElement("table");
      newTable.style.width = table.style.width || "80%";
      newTable.style.borderCollapse = table.style.borderCollapse || "collapse";
      newTable.style.marginTop = table.style.marginTop || "10px";
      wrapper.appendChild(newTable);

      const rows = Array.from(table.rows);
      let rowIndex = 0;
      let cellIndex = 0;

      function typeCell() {
        if (rowIndex < rows.length) {
          const row = rows[rowIndex];
          if (cellIndex === 0) {
            const newRow = document.createElement("tr");
            if (row.style.background) newRow.style.background = row.style.background;
            newTable.appendChild(newRow);
          }

          const newRow = newTable.rows[rowIndex];
          const cell = row.cells[cellIndex];
          const newCell = cell.tagName === "TH" ? document.createElement("th") : document.createElement("td");

          // Copy styles
          newCell.style.padding = cell.style.padding;
          newCell.style.textAlign = cell.style.textAlign;
          newCell.innerHTML = ""; // start empty

          newRow.appendChild(newCell);

          let charIndex = 0;
          function typeChar() {
            if (charIndex < cell.innerHTML.length) {
              newCell.innerHTML += cell.innerHTML[charIndex];
              charIndex++;
              chatBox.scrollTop = chatBox.scrollHeight;
              setTimeout(typeChar, 20); // adjust typing speed here
            } else {
              cellIndex++;
              if (cellIndex < row.cells.length) {
                typeCell();
              } else {
                rowIndex++;
                cellIndex = 0;
                typeCell();
              }
            }
          }
          typeChar();
        }
      }

      typeCell();
    }

    //time-changing
    const dateInput = document.getElementById("demo-date");
    const timeButtons = document.querySelectorAll(".time-slot-btn");

    dateInput.addEventListener("change", () => {
      const selectedDateStr = dateInput.value; // yyyy-mm-dd
      if (!selectedDateStr) return;

      const selectedDate = new Date(selectedDateStr);
      const now = new Date(); // Local time (IST for India users)

      timeButtons.forEach(btn => {
        const timeText = btn.dataset.time; // "11:00 AM"

        // Convert time string â†’ hours/minutes
        let [time, period] = timeText.split(" ");
        let [hours, minutes] = time.split(":").map(Number);

        if (period === "PM" && hours !== 12) hours += 12;
        if (period === "AM" && hours === 12) hours = 0;

        const slotTime = new Date(selectedDate);
        slotTime.setHours(hours, minutes, 0, 0);

        // âœ… If selected date is TODAY
        if (selectedDate.toDateString() === now.toDateString()) {
          if (slotTime <= now) {
            btn.style.display = "none"; // âŒ hide past time
          } else {
            btn.style.display = "inline-block"; // âœ… show future time
          }
        }
        // âœ… If FUTURE date â†’ show all
        else if (selectedDate > now) {
          btn.style.display = "inline-block";
        }
        // âŒ Past date â†’ hide all
        else {
          btn.style.display = "none";
        }
      });
    });



    function handleBotFlow(msg) {
      msg = String(msg).toLowerCase().trim();


      if (msg.includes("demo") || msg.includes("request")) {
        botReply("Great! Please fill out this form to request a demo:");
        showDemoForm();
        showQuickReplies(["Pricing Details", "Explore Features", "Contact Support"]);
        return;
      }
      else if (msg.includes("pricing") || msg.includes("cost") || msg.includes("plan") || msg.includes("price")) {

        botReplyTypingTable(`
      <div class="chat-bubble bot" style="
        background:#f5f5f5;
        padding:10px;
        border-radius:10px;
        width:100%;
        overflow-x:auto;
      ">

      <table style="
        width:100%;
        border-collapse: collapse;
        font-size:14px;
        background:white;
        border-radius:8px;
        overflow:hidden;
      ">
        <tr >
          <th style="border:1px solid #ddd; padding:6px; text-align:left;">Plan</th>
          <!-- <th style="border:1px solid #ddd; padding:6px; text-align:left;">Monthly</th> -->
          <!-- <th style="border:1px solid #ddd; padding:6px; text-align:left;">Yearly</th> -->
          <th style="border:1px solid #ddd; padding:6px; text-align:left;">Duration</th>
          <th style="border:1px solid #ddd; padding:6px; text-align:left;">Employees</th>
        </tr>

        <tr>
          <td style="border:1px solid #ddd; padding:6px;">7 Days Free-trail</td>
          <td style="border:1px solid #ddd; padding:6px;">7 Days</td>
          <!-- <td style="border:1px solid #ddd; padding:6px;">Â£0/ 7 Days</td> -->
          <td style="border:1px solid #ddd; padding:6px;">1â€“10</td>
        </tr>

        <!-- <tr>
          <td style="border:1px solid #ddd; padding:6px;">Standard</td>
          <td style="border:1px solid #ddd; padding:6px;">Â£39/month</td>
          <td style="border:1px solid #ddd; padding:6px;">Â£390/year</td>
          <td style="border:1px solid #ddd; padding:6px;">1â€“25</td>
        </tr> -->

        <!--
        <tr>
          <td style="border:1px solid #ddd; padding:6px;">Premium</td>
          <td style="border:1px solid #ddd; padding:6px;">Â£49/month</td>
          <td style="border:1px solid #ddd; padding:6px;">Â£490/year</td>
          <td style="border:1px solid #ddd; padding:6px;">1â€“75</td>
        </tr>
        -->

        <!--
        <tr>
          <td style="border:1px solid #ddd; padding:6px;">Pro</td>
          <td style="border:1px solid #ddd; padding:6px;">Â£59/month</td>
          <td style="border:1px solid #ddd; padding:6px;">Â£590/year</td>
          <td style="border:1px solid #ddd; padding:6px;">1â€“200</td>
        </tr>
        -->
          
        
      </table>

      </div>

    `);

      }

      // else if (msg.includes("pricing") || msg.includes("cost")) {
      //   botReply("YariHive pricing starts as low as â‚¹X/user/month. Would you like detailed pricing? Please Click on Request a Demo");
      // } 

      else if (msg.includes("feature")) {
        const featuresHtml = `
        <div class="yh-feature-box">
          <div class="yh-feature-title">âœ¨ YariHive Features</div>

          <ul class="yh-feature-list">
            <li>ğŸ‘¨â€ğŸ’¼ Employee Management</li>
            <li>ğŸ“ Leave Management & Approvals</li>
            <li>ğŸ“‘ Timesheet Tracking</li>
            <li>ğŸ“Œ Task Assignment & Monitoring</li>
            <li>ğŸ“‘ Compliance & Policies</li>
            <li>ğŸ¢ Org Chart Visualization</li>
            <li>ğŸ” Role-Based Access</li>
            <li>ğŸŒ Employee Self-Service Portal</li>
          </ul>
        </div>
      `;

        botReplyTyping(features);
      }


      else if (msg.includes("support") || msg.includes("contact")) {
        botReplyTyping("You can contact us at info@yarihive.com");
      }
      else if (msg.includes("hi") || msg.includes("hello") || msg.includes("hey")) {
        botReplyTyping("ğŸ‘‹ Hi! Welcome to YariHive â€” All-in-one HR Solution.<br><br>How can I help you today?")
      }
      else {
        botReplyTyping("ğŸ‘‹ Hi! Welcome to YariHive â€” All-in-one HR Solution.<br><br>How can I help you today?")
      }

      showQuickReplies(["Request a Demo", "Pricing Details", "Explore Features", "Contact Support"]);
    }

    function showDemoForm() {
      const formHtml = `
    <div id="demo-form" style="margin-top:10px; display:flex; flex-direction:column; gap:8px;">

      <div>
        <input id="demo-name" type="text" placeholder="Your Name"
          style="padding:8px; border-radius:5px; border:1px solid #ccc; width:100%;" />
        <small id="error-name" style="color:red; display:none;">Please enter your name</small>
      </div>

      <div>
        <input id="demo-email" type="email" placeholder="Your Email"
          style="padding:8px; border-radius:5px; border:1px solid #ccc; width:100%;" />
        <small id="error-email" style="color:red; display:none;">Please enter a valid email</small>
      </div>

      <div>
        <input id="demo-company" type="text" placeholder="Company Name"
          style="padding:8px; border-radius:5px; border:1px solid #ccc; width:100%;" />
        <small id="error-company" style="color:red; display:none;">Please enter your company name</small>
      </div>

      <label style="font-size:13px; color:#555;">Select Preferred Date:</label>
      <div>
        <input id="demo-date" type="date"
          style="padding:8px; border-radius:5px; border:1px solid #ccc; width:100%;" />
        <small id="error-date" style="color:red; display:none;">Please select a date</small>
      </div>

      <label style="font-size:13px; color:#555;">Select Time Slot In: IST</label>
      <div id="time-slot-container" style="display:flex; gap:6px; flex-wrap:wrap;">
        <button class="time-slot-btn" data-time="11:00 AM">11:00 AM</button>
        <button class="time-slot-btn" data-time="12:00 PM">12:00 PM</button>
        <button class="time-slot-btn" data-time="01:00 PM">1:00 PM</button>
        <button class="time-slot-btn" data-time="02:00 PM">2:00 PM</button>
        <button class="time-slot-btn" data-time="05:00 PM">5:00 PM</button>
      </div>
      <small id="error-time" style="color:red; display:none;">Please select a time slot</small>

      <button id="demo-submit"
        style="background:#646B2E;color:#fff;padding:8px 10px;border:none;border-radius:5px;cursor:pointer;margin-top:5px;">
        Submit
      </button>

    </div>
  `;

      body.innerHTML += formHtml;
      body.scrollTop = body.scrollHeight;

      // ===== TIME SLOT BOOKING LOGIC =====

      const dateInput = document.getElementById("demo-date");
      const timeButtons = document.querySelectorAll(".time-slot-btn");

      dateInput.addEventListener("change", () => {
        const selectedDate = new Date(dateInput.value);
        const now = new Date(); // India local time

        timeButtons.forEach(btn => {
          const originalTime = btn.dataset.time;

          // Convert "01:00 PM" â†’ Date object
          let [time, period] = originalTime.split(" ");
          let [hours, minutes] = time.split(":").map(Number);

          if (period === "PM" && hours !== 12) hours += 12;
          if (period === "AM" && hours === 12) hours = 0;

          const slotTime = new Date(selectedDate);
          slotTime.setHours(hours, minutes, 0, 0);

          // ğŸ”„ Reset button first
          btn.disabled = false;
          btn.textContent = originalTime;
          btn.style.background = "#fff";
          btn.style.color = "#0066ff";
          btn.style.border = "1px solid #0066ff";
          btn.style.cursor = "pointer";

          // âœ… TODAY logic
          if (selectedDate.toDateString() === now.toDateString()) {
            if (slotTime <= now) {
              markAsBooked(btn);
            }
          }
          // âŒ PAST date â†’ all booked
          else if (selectedDate < now) {
            markAsBooked(btn);
          }
        });
      });

      function markAsBooked(btn) {
        btn.disabled = true;
        btn.textContent = "Booked by Client";
        btn.style.background = "#eee";
        btn.style.color = "#999";
        btn.style.border = "1px solid #ddd";
        btn.style.cursor = "not-allowed";
      }


      flatpickr("#demo-date", {
        dateFormat: "m/d/Y",  // MM/DD/YYYY
        minDate: "today",     // disable past dates
      });


      // Time slot selection
      let selectedTime = "";

      document.querySelectorAll(".time-slot-btn").forEach(btn => {
        btn.style.padding = "6px 10px";
        btn.style.border = "1px solid #646B2E";
        btn.style.borderRadius = "6px";
        btn.style.background = "#fff";
        btn.style.cursor = "pointer";
        btn.style.fontSize = "13px";
        btn.style.color = "#646B2E";

        btn.onclick = () => {
          document.querySelectorAll(".time-slot-btn").forEach(b => {
            b.style.background = "#fff";
            b.style.color = "#646B2E";
          });

          btn.style.background = "#646B2E";
          btn.style.color = "#fff";

          selectedTime = btn.dataset.time;
        };
      });


      // UPDATED SUBMIT HANDLER
      document.getElementById("demo-submit").onclick = () => {
        const name = document.getElementById("demo-name").value.trim();
        const email = document.getElementById("demo-email").value.trim();
        const company = document.getElementById("demo-company").value.trim();
        const date = document.getElementById("demo-date").value.trim();

        let firstErrorField = null;  // â­ For auto-scroll

        const makeError = (id, afterEl, msg, fieldEl) => {
          let el = document.getElementById(id);
          if (!el) {
            el = document.createElement("div");
            el.id = id;
            el.style.color = "red";
            el.style.fontSize = "0.85em";
            el.style.marginTop = "3px";
            afterEl.after(el);
          }
          el.textContent = msg;

          // â­ Only save the first error for auto-scroll
          if (!firstErrorField) firstErrorField = fieldEl;
        };

        const clearError = (id) => {
          let el = document.getElementById(id);
          if (el) el.textContent = "";
        };

        // Clear previous errors
        clearError("err-name");
        clearError("err-email");
        clearError("err-company");
        clearError("err-date");
        clearError("err-time");

        let hasError = false;

        // ---- Field Validations ----

        if (!name) {
          makeError("err-name", document.getElementById("demo-name"), "Please enter your name", document.getElementById("demo-name"));
          hasError = true;
        }

        if (!email) {
          makeError("err-email", document.getElementById("demo-email"), "Please enter your email", document.getElementById("demo-email"));
          hasError = true;
        }

        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (email && !emailRegex.test(email)) {
          makeError("err-email", document.getElementById("demo-email"), "Invalid email format", document.getElementById("demo-email"));
          hasError = true;
        }

        if (!company) {
          makeError("err-company", document.getElementById("demo-company"), "Please enter your company name", document.getElementById("demo-company"));
          hasError = true;
        }

        if (!date) {
          makeError("err-date", document.getElementById("demo-date"), "Please select a date", document.getElementById("demo-date"));
          hasError = true;
        }

        if (!selectedTime) {
          makeError("err-time", document.getElementById("time-slot-container"), "Please select a time slot", document.getElementById("time-slot-container"));
          hasError = true;
        }

        // â­ Auto-scroll to first error
        if (hasError && firstErrorField) {
          firstErrorField.scrollIntoView({ behavior: "smooth", block: "center" });
          return;
        }

        // ---- SUCCESS ----
        botReplyTyping(`
        Thank You, ${name}! Your demo request for "${company}" is recorded.
        ğŸ“§ Email: ${email}
        ğŸ“… Date: ${date}
        â° Time Slot: ${selectedTime}
      `);

        const params = new URLSearchParams({
          name,
          email,
          company,
          date,
          time: selectedTime
        });

        fetch(`https://talent-flow-backend.azurewebsites.net/api/v1/employeeManager/demo-email?${params.toString()}`, {
          method: "POST"
        })
          .then(res => {
            if (res.status === 200) {
              botReplyTyping("ğŸ“© Your demo request has been submitted successfully! Our team will contact you soon.");
              showQuickReplies(["Pricing Details", "Explore Features", "Contact Support"]);
            } else {
              throw new Error("Request failed");
            }
          })
          .catch(() => {
            botReply("âš ï¸ Sorry, something went wrong. Please try again.");
          });

        document.getElementById("demo-form").remove();
      };


    }
  </script>

</body>

</html>